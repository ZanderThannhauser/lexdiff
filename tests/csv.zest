


"./lexdiff" (+x): file("bin/release-build/lexdiff");

"./spec-file.txt": ""
	+ "['+'|'-']['0'-'9']+'.'['0'-'9']+: {" + "\n"
		+ "extra: -10,\n"
		+ "similar: -8,\n"
		+ "missing: -10,\n"
		+ "within 0.1: -5,\n"
		+ "within 0.01: -2,\n"
	+ "};\n"
	+ "',': {extra: -20, missing: -20};\n"
	+ "'\n': {extra: -20, missing: -20};\n"
	;

"./before.txt": ""
	+ "+0.00,+0.31,+0.59,+0.81,+0.95,+1.00,+0.95,+0.81,+0.59,+0.31,+0.00\n"
	+ "+0.31,+0.62,+0.90,+1.12,+1.26,+1.31,+1.26,+1.12,+0.90,+0.62,+0.31\n"
	+ "+0.59,+0.90,+1.18,+1.40,+1.54,+1.59,+1.54,+1.40,+1.18,+0.90,+0.59\n"
	+ "+0.81,+1.12,+1.40,+1.62,+1.76,+1.81,+1.76,+1.62,+1.40,+1.12,+0.81\n"
	+ "+0.95,+1.26,+1.54,+1.76,+1.90,+1.95,+1.90,+1.76,+1.54,+1.26,+0.95\n"
	+ "+1.00,+1.31,+1.59,+1.81,+1.95,+2.00,+1.95,+1.81,+1.59,+1.31,+1.00\n"
	+ "+0.95,+1.26,+1.54,+1.76,+1.90,+1.95,+1.90,+1.76,+1.54,+1.26,+0.95\n"
	+ "+0.81,+1.12,+1.40,+1.62,+1.76,+1.81,+1.76,+1.62,+1.40,+1.12,+0.81\n"
	+ "+0.59,+0.90,+1.18,+1.40,+1.54,+1.59,+1.54,+1.40,+1.18,+0.90,+0.59\n"
	+ "+0.31,+0.62,+0.90,+1.12,+1.26,+1.31,+1.26,+1.12,+0.90,+0.62,+0.31\n"
	+ "+0.00,+0.31,+0.59,+0.81,+0.95,+1.00,+0.95,+0.81,+0.59,+0.31,+0.00\n";

"./after.txt": ""
	+ "+0.00,+0.31,+0.59,+0.82,+0.95,+1.00,+0.95,+0.81,+0.59,+0.31,+0.00\n"
	+ "+0.31,+0.62,+0.90,+1.12,+1.26,+1.31,+1.27,+1.12,+0.90,+0.63,+0.31\n"
	+ "+0.59,+0.90,+1.19,+1.40,+1.54,+1.59,+1.54,+1.40,+1.18,+0.90,+0.59\n"
	+ "+0.82,+1.12,+1.40,+1.62,+1.76,+1.81,+1.76,+1.62,+1.40,+1.12,+0.81\n"
	+ "+0.95,+1.26,+1.54,+1.81,+1.91,+1.95,+1.90,+1.76,+1.54,+1.26,+0.95\n"
	+ "+1.00,+11.31,+1.60,+1.81,+1.95,+2.00,+1.95,+1.81,+1.59,+1.31,+1.05\n"
	+ "+0.95,+1.26,+1.55,+1.76,+1.90,+1.95,+1.90,+1.76,+1.54,+1.26,+0.95\n"
	+ "+0.81,+1.12,+11.40,+1.62,+1.76,+1.81,+1.76,+1.62,+1.40,+1.12,+0.81\n"
	+ "+0.60,+0.90,+1.18,+1.40,+1.59,+1.60,+1.54,+1.40,+11.18,+0.90,+0.59\n"
	+ "+0.31,+0.62,+0.90,+1.12,+1.26,+1.31,+1.26,+1.12,+0.90,+0.62,+0.31\n"
	+ "+0.00,+0.31,+0.59,+0.81,+0.95,+1.00,+0.95,+0.81,+0.59,+0.31,+0.00\n";

shell("./lexdiff" "-W80" "-p" "./spec-file.txt" "before.txt" "after.txt" >1 "./stdout.txt") == 0;

file("./stdout.txt") == ""
	+ "  1/  1 | +0.00,+0.31,+0.59,+0.82,+0.95,+1.00,+0.95,+0.81,+0.59,+0.31,+0.00\xE2\x86\xB2    | +0.82 numerically close enough to +0.81 (-2)\n"
	+ "  2/  2 | +0.31,+0.62,+0.90,+1.12,+1.26,+1.31,+1.27,+1.12,+0.90,+0.63,+0.31\xE2\x86\xB2    | +1.27 numerically close enough to +1.26 (-2)\n"
	+ "                                                                                | +0.63 numerically close enough to +0.62 (-2)\n"
	+ "  3/  3 | +0.59,+0.90,+1.19,+1.40,+1.54,+1.59,+1.54,+1.40,+1.18,+0.90,+0.59\xE2\x86\xB2    | +1.19 numerically close enough to +1.18 (-2)\n"
	+ "  4/  4 | +0.82,+1.12,+1.40,+1.62,+1.76,+1.81,+1.76,+1.62,+1.40,+1.12,+0.81\xE2\x86\xB2    | +0.82 numerically close enough to +0.81 (-2)\n"
	+ "  5/  5 | +0.95,+1.26,+1.54,+1.81,+1.91,+1.95,+1.90,+1.76,+1.54,+1.26,+0.95\xE2\x86\xB2    | +1.81 numerically close enough to +1.76 (-5)\n"
	+ "                                                                                | +1.91 numerically close enough to +1.90 (-2)\n"
	+ "  6/  6 | +1.00,+11.31,+1.60,+1.81,+1.95,+2.00,+1.95,+1.81,+1.59,+1.31,+1.05\xE2\x86\xB2   | \'+11.31\' instead of \'+1.31\' (-8)\n"
	+ "                                                                                | +1.60 numerically close enough to +1.59 (-2)\n"
	+ "                                                                                | +1.05 numerically close enough to +1.00 (-5)\n"
	+ "  7/  7 | +0.95,+1.26,+1.55,+1.76,+1.90,+1.95,+1.90,+1.76,+1.54,+1.26,+0.95\xE2\x86\xB2    | +1.55 numerically close enough to +1.54 (-2)\n"
	+ "  8/  8 | +0.81,+1.12,+11.40,+1.62,+1.76,+1.81,+1.76,+1.62,+1.40,+1.12,+0.81\xE2\x86\xB2   | \'+11.40\' instead of \'+1.40\' (-8)\n"
	+ "  9/  9 | +0.60,+0.90,+1.18,+1.40,+1.59,+1.60,+1.54,+1.40,+11.18,+0.90,+0.59\xE2\x86\xB2   | +0.60 numerically close enough to +0.59 (-2)\n"
	+ "                                                                                | +1.59 numerically close enough to +1.54 (-5)\n"
	+ "                                                                                | +1.60 numerically close enough to +1.59 (-2)\n"
	+ "                                                                                | \'+11.18\' instead of \'+1.18\' (-8)\n"
	+ " 10/ 10 | +0.31,+0.62,+0.90,+1.12,+1.26,+1.31,+1.26,+1.12,+0.90,+0.62,+0.31\xE2\x86\xB2\n"
	+ " 11/ 11 | +0.00,+0.31,+0.59,+0.81,+0.95,+1.00,+0.95,+0.81,+0.59,+0.31,+0.00\xE2\x86\xB2\n"
	+ " 12/ 12 | \n"
	+ "score: +41\n";




















